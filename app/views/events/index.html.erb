<div id="map">
</div>

  <div id="slider-container">
  <div class="era list-inline">
  <% @events.each do |event| %>
    <i class="arrow fa fa-caret-down" style="left:<%= event.inrange %>%"><%= event.start_year %></i>
    <% end %>

    <li id="an" style="width: <%= Event.get_period_percent(3976) %>%">Antiquité</li>
    <li id="ma" style="width: <%= Event.get_period_percent(1016) %>%">Moyen Âge</li>
    <li id="tm" style="width: <%= Event.get_period_percent(297) %>%">Temps Modernes</li>
    <li id="ec" style="width: <%= Event.get_period_percent(226) %>%">Epoque Contemporaine</li>
  </div>
    <input id="slider" type="range" min=<%= Event::FIRST_YEAR %> max=<%= Event::LAST_YEAR %> step="10" />
  </div>


</div>

<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).on('ready', function() {
      handler = Gmaps.build('Google');
      handler.buildMap({ internal: { id: 'map' } }, function(){
        markers = handler.addMarkers(<%= raw @markers.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });

 document.getElementById('slider').addEventListener('change', function() {
      var selected = this.value;
      console.log("selected ", selected);
  });

    })
  <% end %>
<% end %>

